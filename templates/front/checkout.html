{% extends "front/base.html" %} {% load static %} {% block content %}

<div class="hero-wrap hero-bread" style="background-image: url('/static/front/images/bg_1.jpg')">
  <div class="container">
    <div class="row no-gutters slider-text align-items-center justify-content-center">
      <div class="col-md-9 ftco-animate text-center">
        <p class="breadcrumbs">
          <span class="mr-2"><a href="index.html">Home</a></span>
          <span>Checkout</span>
        </p>
        <h1 class="mb-0 bread">Checkout</h1>
      </div>
    </div>
  </div>
</div>

<section class="ftco-section">
  <form action="{% url 'checkout_page' %}" method="POST" class="billing-form">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-xl-7 ftco-animate">
          {% csrf_token %}
          {% if addrs %}
          {% for x in addrs %}
          <h1 class="mb-4">Billing Details</h1>
          <div class="row align-items-end">
            <div class="col-md-10 border rounded">
              <h3>{{x.first_name}} {{x.last_name}}</h3>
              <hr>
              <h4>{{x.street_address}} - {{x.postcode}}</h4>
              <h4>{{x.city}}, {{x.states}}</h4>
              <h4></h4>
              <h5>Phone: +91 {{x.phone}}</h5>
            </div>

            {% endfor %}
            {% else %}
            <h3 class="mb-4 billing-heading">Billing Details</h3>
            <div class="row align-items-end">
              <div class="col-md-6">
                <div class="form-group">
                  <label>First Name</label>
                  <input type="text" name="f_name" class="form-control" required>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Last Name</label>
                  <input type="text" name="l_name" class="form-control" required>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col-md-12">
                <div class="form-group">
                  <label>State / Country</label>
                  <div class="select-wrap">
                    <div class="icon"><span class="ion-ios-arrow-down"></span></div>
                    <select name="state_name" id="" class="form-control">
                      <option value="Maharashtra">Maharashtra</option>
                      <option value="Delhi">Delhi</option>
                      <option value="Gujarat">Gujarat</option>
                      <option value="Rajasthan">Rajasthan</option>
                      <option value="Karnataka">Karnataka</option>
                      <option value="Telangana">Telangana</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col-md-12">
                <div class="form-group">
                  <label>Street Address</label>
                  <input type="text" name="address_name" class="form-control" required>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Town / City</label>
                  <input type="text" name="city_name" class="form-control" required>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Postcode / ZIP *</label>
                  <input type="number" name="postcode_no" class="form-control" required>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Phone</label>
                  <input type="number" name="phone_no" class="form-control" required>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Email Address</label>
                  <input type="email" name="email_add" class="form-control" required>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col-md-12">
                <div class="form-group mt-4">
                  <div class="radio">
                    <label class="mr-3"><input type="radio" name="optradio" /> Create an Account?
                    </label>
                    <label><input type="radio" name="optradio" /> Ship to different
                      address</label>
                  </div>
                </div>
              </div>
              {% endif %}
            </div>
          </div>
        
          <div class="col-xl-5">
            <div class="row mt-5 pt-3">
              <div class="col-md-12 d-flex mb-5">
                <div class="cart-detail cart-total p-3 p-md-4">
                  <h3 class="billing-heading mb-4">Cart Total</h3>
            
                  <p class="d-flex total-price">
                    <span>Subtotal</span>
                    <span class="total">{{tot.total}}</span>
                  </p>
               
                  <p class="d-flex">
                    <span>Delivery</span>
                    <span class='dil'>50</span>
                  </p>
                  <hr>
                  <p class="d-flex total-price"> 
                    <span>Total</span>
                    <span class='finalprice'>0</span>
                  </p>
                </div>
              </div>
              <div class="col-md-12">
                <div class="cart-detail p-3 p-md-4">
                  <h3 class="billing-heading mb-4">Payment Method</h3>
                  <div class="form-group">
                    <div class="col-md-12">
                      <div class="radio">
                        <label><input type="radio" name="optradio" class="mr-2" />
                          Direct Bank Tranfer</label>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-md-12">
                      <div class="radio">
                        <label><input type="radio" name="optradio" class="mr-2" />
                          Check Payment</label>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-md-12">
                      <div class="radio">
                        <label><input type="radio" name="optradio" class="mr-2" />
                          Paypal</label>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-md-12">
                      <div class="checkbox">
                        <label><input type="checkbox" value="" class="mr-2" /> I have
                          read and accept the terms and conditions</label>
                      </div>
                    </div>
                  </div>
                  <p>
                    <input type="submit" class="btn btn-primary py-3 px-4" value="Place an Order" />
                  </p>
                </div>
              </div>
            </div>
          </div>
         
          <!-- .col-md-8 -->
        </div>
      </div>
  </form>
  <!-- END -->
</section>
<!-- .section -->

<section class="ftco-section ftco-no-pt ftco-no-pb py-5 bg-light">
  <div class="container py-4">
    <div class="row d-flex justify-content-center py-5">
      <div class="col-md-6">
        <h2 style="font-size: 22px" class="mb-0">Subcribe to our Newsletter</h2>
        <span>Get e-mail updates about our latest shops and special offers</span>
      </div>
      <div class="col-md-6 d-flex align-items-center">
        <form action="#" class="subscribe-form">
          <div class="form-group d-flex">
            <input type="text" class="form-control" placeholder="Enter email address" />
            <input type="submit" value="Subscribe" class="submit px-3" />
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<script>
$(document).ready(function() {
  let total = $('.total').html()
  let dil = $('.dil').html()
  $('.finalprice').html(parseInt(total)+parseInt(dil)+'â‚¹')
})
</script>
{% comment %} EXTRA JS SAME AS IN CART.HTML PAGE{% endcomment %}

{% comment %} <script>
  $(document).ready(function () {
    var price = document.getElementsByClassName("cart__price");
    var price_value = document.getElementsByClassName("qty");
    var cart_total = document.getElementsByClassName("cart__total");
    let length = price.length;
    for (let i = 0; i < length; i++) {
      const total_value = parseFloat(price_value[i].value) * parseFloat(price[i].innerHTML);
      cart_total[i].innerHTML = total_value;
    }
  });
</script>

<script>
  $(document).ready(function () {
    $(".inc").click(function () {
      var cart_total = document.getElementsByClassName("cart__total");
      var total = document.getElementsByClassName("total")[0];
      var length = cart_total.length;

      result = 0;
      for (let i = 0; i < cart_total.length; i++) {
        const value = cart_total[i].innerHTML;
        result = parseFloat(result) + parseFloat(value);
      }
      total.innerHTML = "Total <span> $ " + result + " </span>";
    });
  });

  $(document).ready(function () {
    $(".dec").click(function () {
      var cart_total = document.getElementsByClassName("cart__total");
      var total = document.getElementsByClassName("total")[0];
      var length = cart_total.length;
      result = 0;
      for (let i = 0; i < cart_total.length; i++) {
        const value = cart_total[i].innerHTML;
        result = parseFloat(result) + parseFloat(value);
      }
      total.innerHTML = "Total <span> $ " + result + " </span>";
    });
  });
</script>

<script>
  $(document).ready(function () {
    var cart_total = document.getElementsByClassName("cart__total");
    var total = document.getElementsByClassName("total")[0];
    var length = cart_total.length;
    result = 0;
    for (let i = 0; i < cart_total.length; i++) {
      const value = cart_total[i].innerHTML;
      result = parseFloat(result) + parseFloat(value);
    }
    total.innerHTML = "Total <span> $ " + result + " </span>";
  });
</script> {% endcomment %}

{% endblock content %}